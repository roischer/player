var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(a,b,d){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==d||d>c)d=c;d=Number(d);0>d&&(d=Math.max(0,c+d));for(b=Number(b||0);b<d;b++)this[b]=a;return this}},"es6","es3");
var core,player,bind=function(b,a){return function(){return b.apply(a,arguments)}},extend=function(b,a){function c(){this.constructor=b}for(var d in a)hasProp.call(a,d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c;b.__super__=a.prototype;return b},hasProp={}.hasOwnProperty;core=this.core||{};core.common=this.core.common||{};core.event=this.core.event||{};core.model=this.core.model||{};player=this.player||{};player.controller=this.player.controller||{};player.event=this.player.event||{};
player.model=this.player.model||{};player.view=this.player.view||{};player.view.controls=this.player.view.controls||{};
core.event.EventDispatcher=function(){function b(a){this.listeners=null!=a?a:[];this.dispatchEvent=bind(this.dispatchEvent,this);this.removeEventListener=bind(this.removeEventListener,this);this.on=this.addEventListener=bind(this.addEventListener,this);this.off=this.removeEventListener;this.emit=this.dispatchEvent}b.prototype.addEventListener=function(a,b){return this.listeners.push({type:a,callback:b})};b.prototype.removeEventListener=function(a,b){var d,c,f;var g=[];for(d=c=f=this.listeners.length-
1;0>=f?0>c:0<c;d=0>=f?++c:--c){var h=this.listeners[d];h.type===a&&h.callback===b?g.push(this.listeners.splice(d,1)):g.push(void 0)}return g};b.prototype.dispatchEvent=function(a,b){var d;null==b&&(b=null);b={target:this,type:a,data:b};var c=this.listeners;var f=[];var g=0;for(d=c.length;g<d;g++){var h=c[g];h.type===a?f.push(h.callback(b)):f.push(void 0)}return f};return b}();core.event.Event=function(){function b(){}b.MODEL_CHANGED="modelChanged";b.READY="ready";b.RESIZE="resize";return b}();
core.common.Utils=function(){function b(){}b.setCookie=function(a,b){return document.cookie=a+"="+b};b.getCookie=function(a){if(-1!==document.cookie.indexOf(a+"=")){var b=void 0;0<document.cookie.length&&(b=document.cookie.indexOf(a+"="));if(-1!==b)return b=b+a.length+1,a=document.cookie.indexOf(";",b),-1===a&&(a=document.cookie.length),b=unescape(document.cookie.substring(b,a)),"true"===b&&(b=!0),"false"===b&&(b=!1),"undefined"===b&&(b=void 0),"undefined"===b&&(b=null),b}};b.clearCookie=function(a){return document.cookie=
a+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"};b.clearCookies=function(){var a;var b=document.cookie.split(";");var d=[];var e=0;for(a=b.length;e<a;e++){var f=b[e];var g=f.indexOf("=");f=-1<g?f.substr(0,g):f;d.push(document.cookie=f+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT")}return d};b.getQuery=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.search);return null==a?void 0:decodeURIComponent(a[1].replace(/\+/g," "))};b.searchify=function(a){var b=
[];for(d in a){var d=encodeURIComponent(d);var e=encodeURIComponent(a[d]);b.push(d+"="+e)}return b.join("&")};b.on=function(a,b,d){if(a.addEventListener)return a.addEventListener(b,d,!1);if(a.attachEvent)return a["e"+b+d]=d,a[b+d]=function(){return a["e"+b+d](window.event)}};b.off=function(a,b,d){if(a.removeEventListener)return a.removeEventListener(b,d,!1);if(a.detachEvent)return a.detachEvent("on"+b,a[b+d]),a[b+d]=null,a["e"+b+d]=null};b.domLoaded=function(){return"complete"===document.readyState||
"interactive"===document.readyState};b.request=function(a,b){var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){if(4===d.readyState)return 200!==d.status&&304!==d.status?"function"===typeof b?b({error:!0}):void 0:"function"===typeof b?b({data:d.responseText}):void 0};return d.send()};b["typeof"]=function(a){if(null==a)return!1;a=a.constructor.toString();a=a.split("()")[0];a=a.replace("function ","");a=a.trim();return 0<a.length?a:!1};b.loadScript=function(a,b){var d=document.createElement("script");
d.src=a;d.onload=b;document.getElementsByTagName("head")[0].appendChild(d);return d};b.getPosition=function(a){var b,d;for(d=b=0;a;)b+=a.offsetLeft-a.scrollLeft+a.clientLeft,d+=a.offsetTop-a.scrollTop+a.clientTop,a=a.offsetParent;return{x:b,y:d}};b.isMobile=function(){return!!navigator.userAgent.match(/(Android)|(iPhone)|(webOS)|(iPad)|(iPod)|(BlackBerry)|(Windows Phone)/i)};b.getScreenSize=function(){var a=1<window.devicePixelRatio?window.devicePixelRatio:1;return{width:screen.width/a({height:screen.height/
a})}};return b}();
core.model.Model=function(b){function a(){this._checkCookies=bind(this._checkCookies,this);this._checkQueries=bind(this._checkQueries,this);this.pullData=bind(this.pullData,this);this.getData=bind(this.getData,this);this.setData=bind(this.setData,this);a.__super__.constructor.call(this);this.pullData()}extend(a,b);var c=core.common.Utils;var d=core.event.Event;a.prototype.data={};a.prototype.setData=function(a,b){this.data[a]=b;return this.dispatchEvent(d.MODEL_CHANGED,{key:a,value:b})};a.prototype.getData=
function(a){return void 0===a?this.data:this.data[a]};a.prototype.pullData=function(){};a.prototype._checkQueries=function(){var a;var b=[];for(a in this.data){var d=c.getQuery(a);"true"===d&&(d=!0);"false"===d&&(d=!1);b.push(this.data[a]=null!=d?d:this.data[a])}return b};a.prototype._checkCookies=function(){var a;var b=[];for(a in this.data){var d=c.getCookie(a);"true"===d&&(d=!0);"false"===d&&(d=!1);b.push(this.data[a]=null!=d?d:this.data[a])}return b};return a}(core.event.EventDispatcher);
player.model.PlayerConfigModel=function(b){function a(b){this.config=b;this._validateSoundSeek=bind(this._validateSoundSeek,this);this._validateVideoSeek=bind(this._validateVideoSeek,this);this._validateButtons=bind(this._validateButtons,this);this._validateControls=bind(this._validateControls,this);this._validateVideo=bind(this._validateVideo,this);this._validateParent=bind(this._validateParent,this);this.pullData=bind(this.pullData,this);this.resize=bind(this.resize,this);a.__super__.constructor.call(this)}
extend(a,b);var c=core.common.Utils;var d=core.event.Event;a.prototype.data={parent:null,video:{width:640,height:360,sources:["video.mp4"],poster:"poster.png",auto:!1},controls:{skinUrl:"controls-skin.png",height:40,backgroundColor:"#1A1A1A",buttons:{width:35,color:"white"},videoSeek:{fillColor:"#0068ff",backgroundColor:"#444444",bufferColor:"#777777",barHeight:5,thumbHeight:15},soundSeek:{fillColor:"#0068ff",backgroundColor:"#777777",barHeight:4,barWidth:75,thumbHeight:13}}};a.prototype.resize=function(a,
b){this.data.video.width=a;this.data.video.height=b;return this.dispatchEvent(d.RESIZE,{width:a,height:b})};a.prototype.pullData=function(){this._validateParent();this._validateVideo();this._validateControls();return this.emit(d.MODEL_CHANGED)};a.prototype._validateParent=function(){this.data.parent=document.body;if(this.config.parent)return this.data.parent=this.config.parent};a.prototype._validateVideo=function(){if(this.config.video){var a=this.data.video;var b=this.config.video;isNaN(parseInt(b.width))||
(a.width=b.width);isNaN(parseInt(b.height))||(a.height=b.height);"Array"===c["typeof"](b.sources)&&(a.sources=b.sources);"String"===c["typeof"](b.poster)&&(a.poster=b.poster);if("Boolean"===c["typeof"](b.auto))return a.auto=b.auto}};a.prototype._validateControls=function(){if(this.config.controls){var a=this.data.controls;var b=this.config.controls;"String"===c["typeof"](b.skinUrl)&&(a.skinUrl=b.skinUrl);"Number"===c["typeof"](b.height)&&(a.height=b.height);"String"===c["typeof"](b.backgroundColor)&&
(a.backgroundColor=b.backgroundColor);this._validateButtons();this._validateVideoSeek();return this._validateSoundSeek()}};a.prototype._validateButtons=function(){if(this.config.controls.buttons){var a=this.data.controls.buttons;var b=this.config.controls.buttons;"Number"===c["typeof"](b.width)&&(a.width=b.width);if("String"===c["typeof"](b.color))return a.color=b.color}};a.prototype._validateVideoSeek=function(){if(this.config.controls.videoSeek){var a=this.data.controls.videoSeek;var b=this.config.controls.videoSeek;
"String"===c["typeof"](b.fillColor)&&(a.fillColor=b.fillColor);"String"===c["typeof"](b.backgroundColor)&&(a.backgroundColor=b.backgroundColor);"String"===c["typeof"](b.bufferColor)&&(a.bufferColor=b.bufferColor);"Number"===c["typeof"](b.barHeight)&&(a.barHeight=b.barHeight);if("Number"===c["typeof"](b.thumbHeight))return a.thumbHeight=b.thumbHeight}};a.prototype._validateSoundSeek=function(){if(this.config.controls.soundSeek){var a=this.data.controls.soundSeek;var b=this.config.controls.soundSeek;
"String"===c["typeof"](b.fillColor)&&(a.fillColor=b.fillColor);if("String"===c["typeof"](b.backgroundColor))return a.backgroundColor=b.backgroundColor}};return a}(core.model.Model);player.model.AdConfigModel=function(b){function a(b){this.config=b;this.pullData=bind(this.pullData,this);a.__super__.constructor.call(this)}extend(a,b);a.prototype.data=null;a.prototype.pullData=function(){return this.data=this.config.ads};return a}(core.model.Model);
player.model.ModelCollection=function(){var b=player.model.AdConfigModel;var a=player.model.PlayerConfigModel;return function(c){this.config=c;this.playerConfigModel=new a(this.config);this.adConfigModel=new b(this.config)}}();
player.view.View=function(b){function a(){this.hide=bind(this.hide,this);this.show=bind(this.show,this);this.render=bind(this.render,this);a.__super__.constructor.call(this);this.node=document.createElement("div")}extend(a,b);a.prototype.render=function(){};a.prototype.show=function(){return this.node.style.visibility="visible"};a.prototype.hide=function(){return this.node.style.visibility="hidden"};return a}(core.event.EventDispatcher);
player.event.VideoEvent=function(){function b(){}b.PLAYED="played";b.PAUSED="paused";b.VOLUME_CHANGED="volumeChanged";b.TIME_CHANGED="timeChanged";b.BUFFER_CHANGED="bufferChanged";b.METADATA_LOADED="metadataLoaded";b.MOUSE_OVER="mouseover";b.ENTER_FULL_SCREEN="enterFullScreen";b.EXIT_FULL_SCREEN="exitFullScreen";return b}();
player.view.VideoView=function(b){function a(){this._getFSCommand=bind(this._getFSCommand,this);this._onFullScreenChange=bind(this._onFullScreenChange,this);this._onVideoEvent=bind(this._onVideoEvent,this);this._setSources=bind(this._setSources,this);this._addListeners=bind(this._addListeners,this);this._setInitialState=bind(this._setInitialState,this);this.disableControls=bind(this.disableControls,this);this.enableControls=bind(this.enableControls,this);this.requestFullScreen=bind(this.requestFullScreen,
this);this.setVolume=bind(this.setVolume,this);this.setTime=bind(this.setTime,this);this.unmute=bind(this.unmute,this);this.mute=bind(this.mute,this);this.pause=bind(this.pause,this);this.play=bind(this.play,this);this.resize=bind(this.resize,this);this.render=bind(this.render,this);var b;a.__super__.constructor.call(this);this.video=document.createElement("video");this.video.id="video-player";this.video.style.display="block";this.isMobile=d.isMobile();this.node.appendChild(this.video);setTimeout(this._setInitialState,
1);var c=!1;(b=navigator.userAgent.match(/(iPhone|iPad|Ipad).*Version\/(\d*)/))&&3===b.length&&9<b[2]&&(this.video.setAttribute("playsinline",""),c=!0);(b=navigator.userAgent.match(/(iPhone|iPad|Ipad).*([1-3]\d).*(CriOS)\/(\d*)/))&&3<b.length&&9<b[2]&&53<b[4]&&(this.video.setAttribute("playsinline",""),c=!0);c||this.video.setAttribute("webkit-playsinline","")}extend(a,b);var c=player.event.VideoEvent;var d=core.common.Utils;a.prototype.isFullScreen=!1;a.prototype.lastVolume=1;a.prototype.render=function(a){this.data=
a;this.video.width=this.data.video.width;this.video.height=this.data.video.height;this.video.poster=this.data.video.poster;this.data.video.auto&&this.video.setAttribute("autoplay","");this.data.parent.appendChild(this.node);this._addListeners();this._getFSCommand();this._setSources(this.data.video.sources);return this.enableControls()};a.prototype.resize=function(a,b){this.video.style.width=a+"px";this.video.style.height=b+"px";this.video.width=a;return this.video.height=b};a.prototype.play=function(){return this.video.play()};
a.prototype.pause=function(){return this.video.pause()};a.prototype.mute=function(){return this.setVolume(0)};a.prototype.unmute=function(){.1>this.lastVolume&&(this.lastVolume=.5);return this.setVolume(this.lastVolume)};a.prototype.setTime=function(a,b){"Number"===d["typeof"](b)&&(a=this.video.duration*b);return this.video.currentTime=a};a.prototype.setVolume=function(a){this.lastVolume=this.video.volume;a=Number(a);null==a&&(a=1);"NaN"===a.toString()&&(a=1);0>a&&(a=0);1<a&&(a=1);this.video.muted=
0===a;this.video.volume=a;return d.setCookie("video_volume",a)};a.prototype.requestFullScreen=function(){return this.video.requestFullScreen()};a.prototype.enableControls=function(){if(this.isMobile||this.isFullScreen)return this.video.setAttribute("controls","")};a.prototype.disableControls=function(){return this.video.removeAttribute("controls")};a.prototype._setInitialState=function(){var a=Number(d.getCookie("video_volume"));var b=navigator.userAgent.match(/Android.*Chrome\/(\d*)/);var c=navigator.userAgent.match(/(iPhone|iPad|Ipad).*Version\/(\d*)/);
var h=navigator.userAgent.match(/(iPhone|iPad|Ipad).*([1-3]\d).*(CriOS)\/(\d*)/);this.data.video.auto&&(b&&2===b.length&&52<b[1]||c&&3===c.length&&9<c[2]||h&&3<h.length&&9<h[2]&&53<h[4])&&(a=0);"NaN"===a.toString()&&(a=this.video.volume);return this.setVolume(a-.01)};a.prototype._addListeners=function(){d.on(this.video,"loadedmetadata",this._onVideoEvent);d.on(this.video,"volumechange",this._onVideoEvent);d.on(this.video,"timeupdate",this._onVideoEvent);d.on(this.video,"play",this._onVideoEvent);
d.on(this.video,"pause",this._onVideoEvent);d.on(this.video,"progress",this._onVideoEvent);d.on(this.video,"mouseover",this._onVideoEvent);d.on(document,"webkitfullscreenchange",this._onFullScreenChange);d.on(document,"mozfullscreenchange",this._onFullScreenChange);d.on(document,"fullscreenchange",this._onFullScreenChange);return d.on(document,"MSFullscreenChange",this._onFullScreenChange)};a.prototype._setSources=function(a){var b;this.video.innerHTML="";var d=[];var c=0;for(b=a.length;c<b;c++){var e=
a[c];var k=document.createElement("source");k.src=e;d.push(this.video.appendChild(k))}return d};a.prototype._onVideoEvent=function(a){var b;var e=b=null;switch(a.type){case "mouseover":b=c.MOUSE_OVER;break;case "loadedmetadata":b=c.METADATA_LOADED;break;case "volumechange":b=c.VOLUME_CHANGED;a=this.video.muted?0:this.video.volume;e={volume:a};break;case "timeupdate":b=c.TIME_CHANGED;e={time:this.video.currentTime,duration:this.video.duration};break;case "play":b=c.PLAYED;break;case "pause":b=c.PAUSED;
break;case "progress":b=c.BUFFER_CHANGED,a=null,this.video.buffered&&0<this.video.buffered.length&&this.video.buffered.end&&this.video.duration&&(a=this.video.buffered.end(0)/this.video.duration),e={percent:a||0}}if("String"===d["typeof"](b))return this.emit(b,e)};a.prototype._onFullScreenChange=function(){if(this.isFullScreen=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen)return this.enableControls(),this.emit(c.ENTER_FULL_SCREEN);this.isMobile||this.disableControls();return this.emit(c.EXIT_FULL_SCREEN)};
a.prototype._getFSCommand=function(){return this.video.requestFullScreen=this.video.requestFullscreen||this.video.msRequestFullscreen||this.video.mozRequestFullScreen||this.video.webkitRequestFullscreen||function(){}};return a}(player.view.View);
player.view.AdView=function(b){function a(){this._css=bind(this._css,this);this.resize=bind(this.resize,this);this.hide=bind(this.hide,this);this.show=bind(this.show,this);this.render=bind(this.render,this);a.__super__.constructor.call(this);this.node.id="ad-view"}extend(a,b);a.prototype.render=function(a){this.data=a;this.data.parent.appendChild(this.node);return this.node.style.cssText=this._css()};a.prototype.show=function(){return this.node.style.display="block"};a.prototype.hide=function(){return this.node.style.display=
"none"};a.prototype.resize=function(a,b){this.node.style.width=a+"px";return this.node.style.height=b+"px"};a.prototype._css=function(){return"top: 0; display: none; position: absolute; width: "+this.data.video.width+"px; height: "+this.data.video.height+"px;"};return a}(player.view.View);
player.event.ControlsEvent=function(){function b(){}b.SKIN_LOADED="skinLoaded";b.FULL_SCREENED="fullScreened";b.PLAYED="playred";b.PAUSED="paused";b.MUTED="muted";b.UNMUTED="unmuted";b.SOUND_SEEKED="soundSeeked";b.VIDEO_SEEK_STARTED="videoSeekStarted";b.VIDEO_SEEK_ENDED="videoSeekEnded";return b}();
player.view.controls.Skin=function(b){function a(b){this.view=b;this._changeColor=bind(this._changeColor,this);this._getColor=bind(this._getColor,this);this._onImgLoaded=bind(this._onImgLoaded,this);this.render=bind(this.render,this);a.__super__.constructor.call(this);this.node=document.createElement("canvas");this.ctx=this.node.getContext("2d");this.img=new Image;this.img.width=0;this.img.height=0;this.img.onload=this._onImgLoaded}extend(a,b);var c=player.event.ControlsEvent;a.prototype.render=function(a){this.data=
a;this.color=this._getColor();this.img.crossOrigin="anonymous";this.img.src=this.data.controls.skinUrl;return this.view.node.appendChild(this.img)};a.prototype._onImgLoaded=function(){this.view.node.removeChild(this.img);this.node.width=this.img.naturalWidth;this.node.height=this.img.naturalHeight;this.ctx.drawImage(this.img,0,0,this.node.width,this.node.height);this._changeColor();return this.emit(c.SKIN_LOADED)};a.prototype._getColor=function(){this.ctx.rect(0,0,1,1);this.ctx.fillStyle=this.data.controls.buttons.color;
this.ctx.fill();var a=this.ctx.getImageData(0,0,1,1).data;this.node.width=this.node.width;return{r:a[0],g:a[1],b:a[2]}};a.prototype._changeColor=function(){var a,b;var c=this.ctx.getImageData(0,0,this.node.width,this.node.height);var g=c.data;var h=a=0;for(b=g.length;a<b;h=a+=4)g[h]=this.color.r,g[h+1]=this.color.g,g[h+2]=this.color.b;return this.ctx.putImageData(c,0,0)};return a}(core.event.EventDispatcher);
player.view.controls.VideoSeek=function(){function b(a){this.view=a;this._thumbCss=bind(this._thumbCss,this);this._fillCss=bind(this._fillCss,this);this._bufferCss=bind(this._bufferCss,this);this._css=bind(this._css,this);this.setBuffer=bind(this.setBuffer,this);this._onMouseUp=bind(this._onMouseUp,this);this._onMouseMove=bind(this._onMouseMove,this);this._onMouseDown=bind(this._onMouseDown,this);this.setTime=bind(this.setTime,this);this.render=bind(this.render,this);this.node=document.createElement("div");
this.buffer=document.createElement("div");this.fill=document.createElement("div");this.thumb=document.createElement("div");this.view.node.appendChild(this.node);this.node.appendChild(this.buffer);this.node.appendChild(this.fill);this.node.appendChild(this.thumb)}var a=player.event.ControlsEvent;var c=core.common.Utils;b.prototype.render=function(a){this.data=a;this.style=this.data.controls.videoSeek;this.node.style.cssText=this._css();this.buffer.style.cssText=this._bufferCss();this.fill.style.cssText=
this._fillCss();this.thumb.style.cssText=this._thumbCss();this.thumb.onmousedown=this._onMouseDown;this.buffer.onmousedown=this._onMouseDown;return this.fill.onmousedown=this._onMouseDown};b.prototype.setTime=function(a,b){b=a/b;a=(this.node.offsetWidth-this.thumb.offsetWidth)*b;b*=this.node.offsetWidth-.5*this.thumb.offsetWidth;this.thumb.style.marginLeft=a+"px";return this.fill.style.width=b+"px"};b.prototype._onMouseDown=function(b){c.on(document,"mousemove",this._onMouseMove);c.on(document,"mouseup",
this._onMouseUp);setTimeout(function(a){return function(){return a._onMouseMove(b,1)}}(this));return this.view.emit(a.VIDEO_SEEK_STARTED)};b.prototype._onMouseMove=function(a){var b=a.clientX||a.pageX;var d=c.getPosition(this.node).x;a=this.node.offsetWidth-this.thumb.offsetWidth;b=b-d-.5*this.thumb.offsetWidth;0>b&&(b=0);b>a&&(b=a);a=b+.5*this.thumb.offsetWidth;if(!(a>this.buffer.offsetWidth))return this.thumb.style.marginLeft=b+"px",this.fill.style.width=a+"px"};b.prototype._onMouseUp=function(b){c.off(document,
"mousemove",this._onMouseMove);c.off(document,"mouseup",this._onMouseUp);return this.view.emit(a.VIDEO_SEEK_ENDED,{percent:this.thumb.offsetLeft/(this.node.offsetWidth-this.thumb.offsetWidth)})};b.prototype.setBuffer=function(a){return this.buffer.style.width=this.node.offsetWidth*a+"px"};b.prototype._css=function(){return"height: "+this.style.barHeight+"px; background-color: "+this.style.backgroundColor+";"};b.prototype._bufferCss=function(){return"width: 0px; height: "+this.style.barHeight+"px; background-color: "+
this.style.bufferColor+";"};b.prototype._fillCss=function(){return"width: 0px; height: "+this.style.barHeight+"px; margin-top: "+-this.style.barHeight+"px; background-color: "+this.style.fillColor+";"};b.prototype._thumbCss=function(){return"position:absolute; cursor: pointer; -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75); -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75); box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75); margin-top: "+(-this.style.barHeight+.5*this.style.barHeight-.5*this.style.thumbHeight)+
"px; height: "+this.style.thumbHeight+"px; width: "+this.style.thumbHeight+"px; border-radius: "+this.style.thumbHeight+"px; background-color: "+this.data.controls.buttons.color+";"};return b}();
player.view.controls.SoundSeek=function(){function b(a){this.view=a;this._thumbCss=bind(this._thumbCss,this);this._fillCss=bind(this._fillCss,this);this._barCss=bind(this._barCss,this);this._css=bind(this._css,this);this._onMouseUp=bind(this._onMouseUp,this);this._onMouseMove=bind(this._onMouseMove,this);this._onMouseDown=bind(this._onMouseDown,this);this.setVolume=bind(this.setVolume,this);this.render=bind(this.render,this);this.node=document.createElement("div");this.bar=document.createElement("div");
this.fill=document.createElement("div");this.thumb=document.createElement("div");this.view.node.appendChild(this.node);this.node.appendChild(this.bar);this.bar.appendChild(this.fill);this.node.appendChild(this.thumb)}var a=player.event.ControlsEvent;var c=core.common.Utils;b.prototype.render=function(a){this.data=a;this.node.style.cssText=this._css();this.bar.style.cssText=this._barCss();this.fill.style.cssText=this._fillCss();this.thumb.style.cssText=this._thumbCss();this.thumb.onmousedown=this._onMouseDown;
this.bar.onmousedown=this._onMouseDown;return this.fill.onmousedown=this._onMouseDown};b.prototype.setVolume=function(a){var b=(this.node.offsetWidth-this.thumb.offsetWidth)*a;a*=this.node.offsetWidth-.5*this.thumb.offsetWidth;this.thumb.style.marginLeft=b+"px";return this.fill.style.width=a+"px"};b.prototype._onMouseDown=function(a){c.on(document,"mousemove",this._onMouseMove);c.on(document,"mouseup",this._onMouseUp);return this._onMouseMove(a)};b.prototype._onMouseMove=function(b){b=b.clientX||
b.pageX;var d=c.getPosition(this.node).x;b=(b-d)/this.node.offsetWidth;0>b&&(b=0);1<b&&(b=1);return this.view.emit(a.SOUND_SEEKED,{volume:b})};b.prototype._onMouseUp=function(a){c.off(document,"mousemove",this._onMouseMove);return c.off(document,"mouseup",this._onMouseUp)};b.prototype._css=function(){return"display:inline-block; height: "+(this.data.controls.height-this.data.controls.videoSeek.barHeight)+"px;"};b.prototype._barCss=function(){return"margin-top: "+(.5*(this.data.controls.height-this.data.controls.videoSeek.barHeight)-
2)+"px; width: "+this.data.controls.soundSeek.barWidth+"px; height: "+this.data.controls.soundSeek.barHeight+"px; background-color: "+this.data.controls.soundSeek.backgroundColor+";"};b.prototype._fillCss=function(){return"height: 100%; width: 0px; background-color: "+this.data.controls.soundSeek.fillColor+";"};b.prototype._thumbCss=function(){return"height: "+this.data.controls.soundSeek.thumbHeight+"px; width: "+this.data.controls.soundSeek.thumbHeight+"px; border-radius: "+this.data.controls.soundSeek.thumbHeight+
"px; margin-top: "+(.5*-this.data.controls.soundSeek.thumbHeight-.5*this.data.controls.soundSeek.barHeight)+"px; background-color: "+this.data.controls.buttons.color+"; cursor: pointer;"};return b}();
player.view.controls.SkinButton=function(){function b(a,b){this.view=a;this.position=b;this._css=bind(this._css,this);this._baseCss=bind(this._baseCss,this);this._cssText=bind(this._cssText,this);this.hide=bind(this.hide,this);this.show=bind(this.show,this);this.render=bind(this.render,this);this.node=document.createElement("canvas");this.id&&(this.node.id=this.id);this.ctx=this.node.getContext("2d");this.hidden=!1;this.view.node.appendChild(this.node)}b.prototype.id="";b.prototype.render=function(a,
b){this.data=a;this.skin=b;this.node.width=this.skin.img.naturalWidth/5;this.node.height=this.skin.img.naturalHeight;a=-this.node.width*(this.position-1);this.node.style.cssText=this._cssText();return this.ctx.drawImage(this.skin.node,a,0)};b.prototype.show=function(){this.hidden=!1;return this.node.style.display="inline-block"};b.prototype.hide=function(){this.hidden=!0;return this.node.style.display="none"};b.prototype._cssText=function(){return this._baseCss()+this._css()};b.prototype._baseCss=
function(){return"display: "+(this.hidden?"none":"inline-block")+"; width: "+this.data.controls.buttons.width+"px; height: "+(this.data.controls.height-this.data.controls.videoSeek.barHeight)+"px; cursor: pointer;"};b.prototype._css=function(){return""};return b}();
player.view.controls.PlayButton=function(b){function a(b){this.view=b;this._onClick=bind(this._onClick,this);a.__super__.constructor.call(this,this.view,2);this.node.onclick=this._onClick}extend(a,b);var c=player.event.ControlsEvent;a.prototype.id="play-btn";a.prototype._onClick=function(){return this.view.emit(c.PLAYED)};return a}(player.view.controls.SkinButton);
player.view.controls.PauseButton=function(b){function a(b){this.view=b;this._css=bind(this._css,this);this._onClick=bind(this._onClick,this);a.__super__.constructor.call(this,this.view,1);this.node.onclick=this._onClick}extend(a,b);var c=player.event.ControlsEvent;a.prototype.id="pause-btn";a.prototype._onClick=function(){return this.view.emit(c.PAUSED)};a.prototype._css=function(){return"display:none;"};return a}(player.view.controls.SkinButton);
player.view.controls.SoundOnButton=function(b){function a(b){this.view=b;this._onClick=bind(this._onClick,this);a.__super__.constructor.call(this,this.view,4);this.node.onclick=this._onClick}extend(a,b);var c=player.event.ControlsEvent;a.prototype.id="sound-on-btn";a.prototype._onClick=function(){return this.view.emit(c.MUTED)};return a}(player.view.controls.SkinButton);
player.view.controls.SoundOffButton=function(b){function a(b){this.view=b;this._onClick=bind(this._onClick,this);a.__super__.constructor.call(this,this.view,3);this.node.onclick=this._onClick}extend(a,b);var c=player.event.ControlsEvent;a.prototype.id="sound-off-btn";a.prototype._onClick=function(){return this.view.emit(c.UNMUTED)};return a}(player.view.controls.SkinButton);
player.view.controls.FullScreenButton=function(b){function a(b){this.view=b;this._css=bind(this._css,this);this._onClick=bind(this._onClick,this);a.__super__.constructor.call(this,this.view,5);this.node.onclick=this._onClick}extend(a,b);var c=player.event.ControlsEvent;a.prototype.id="fullscreen-btn";a.prototype._onClick=function(){return this.view.emit(c.FULL_SCREENED)};a.prototype._css=function(){return"float:right;"};return a}(player.view.controls.SkinButton);
player.view.controls.TimeDisplay=function(){function b(a){this.view=a;this._pad=bind(this._pad,this);this._css=bind(this._css,this);this.setTime=bind(this.setTime,this);this.render=bind(this.render,this);this.node=document.createElement("span");this.view.node.appendChild(this.node)}b.prototype.render=function(a){this.data=a;this.node.style.cssText=this._css();return this.setTime(0,0)};b.prototype.setTime=function(a,b){var d=parseInt(Math.floor(a/60));var c=this._pad(a-60*d);a=d+":"+c;d=parseInt(Math.floor(b/
60));c=this._pad(b-60*d);return this.node.innerHTML=a+" / "+(d+":"+c)};b.prototype._css=function(){return"font-family: Arial; padding-top: "+(.5*(this.data.controls.height-this.data.controls.videoSeek.barHeight)-6)+"px; font-size: 12px; float: right; color: "+this.data.controls.buttons.color+";"};b.prototype._pad=function(a){a=parseInt(a);10>a&&(a="0"+String(a));return a};return b}();
player.view.ControlsView=function(b){function a(){this._setOpacity=bind(this._setOpacity,this);this._fadeTo=bind(this._fadeTo,this);this._css=bind(this._css,this);this._onSkinLoaded=bind(this._onSkinLoaded,this);this.disable=bind(this.disable,this);this.enable=bind(this.enable,this);this.hide=bind(this.hide,this);this.show=bind(this.show,this);this.pause=bind(this.pause,this);this.play=bind(this.play,this);this.setVolume=bind(this.setVolume,this);this.setTime=bind(this.setTime,this);this.setBuffer=
bind(this.setBuffer,this);this.render=bind(this.render,this);a.__super__.constructor.call(this);this.skin=new m(this);this.videoSeek=new k(this);this.playBtn=new h(this);this.pauseBtn=new g(this);this.soundOnBtn=new f(this);this.soundOffBtn=new e(this);this.soundSeek=new l(this);this.fullScreenBtn=new d(this);this.timeDisplay=new c(this);this.skin.on(n.SKIN_LOADED,this._onSkinLoaded)}extend(a,b);var c=player.view.controls.TimeDisplay;var d=player.view.controls.FullScreenButton;var e=player.view.controls.SoundOffButton;
var f=player.view.controls.SoundOnButton;var g=player.view.controls.PauseButton;var h=player.view.controls.PlayButton;var l=player.view.controls.SoundSeek;var k=player.view.controls.VideoSeek;var m=player.view.controls.Skin;var n=player.event.ControlsEvent;a.prototype.visible=!1;a.prototype.render=function(a){this.data=a;this.data.parent.appendChild(this.node);this.node.style.cssText=this._css();this.node.onmouseover=function(a){return function(){return a.show()}}(this);this.node.onmouseout=function(a){return function(){return a.hide(.5)}}(this);
window.onmouseout=function(a){return function(){return a.hide(.5)}}(this);this.skin.render(this.data);this.videoSeek.render(this.data);this.soundSeek.render(this.data);this.timeDisplay.render(this.data);return this.enable()};a.prototype.setBuffer=function(a){return this.videoSeek.setBuffer(a)};a.prototype.setTime=function(a,b){this.videoSeek.setTime(a,b);return this.timeDisplay.setTime(a,b)};a.prototype.setVolume=function(a){this.soundSeek.setVolume(a);if(0===a)return this.soundOnBtn.hide(),this.soundOffBtn.show();
this.soundOffBtn.hide();return this.soundOnBtn.show()};a.prototype.play=function(){this.playBtn.hide();return this.pauseBtn.show()};a.prototype.pause=function(){this.playBtn.show();return this.pauseBtn.hide()};a.prototype.show=function(){this.visible=!0;return this._fadeTo(1)};a.prototype.hide=function(a){this.visible=!1;return this._fadeTo(0,a)};a.prototype.enable=function(){if(this.data)return this.node.style.width=this.data.video.width+"px",this.node.style.overflow=""};a.prototype.disable=function(){this.node.style.width=
"0px";return this.node.style.overflow="hidden"};a.prototype._onSkinLoaded=function(){this.playBtn.render(this.data,this.skin);this.pauseBtn.render(this.data,this.skin);this.soundOnBtn.render(this.data,this.skin);this.soundOffBtn.render(this.data,this.skin);return this.fullScreenBtn.render(this.data,this.skin)};a.prototype._css=function(){return"top: "+(this.data.video.height-this.data.controls.height)+"px; background-color: "+this.data.controls.backgroundColor+"; height: "+this.data.controls.height+
"px; position: absolute; width: "+this.data.video.width+"px; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"};a.prototype._fadeTo=function(a,b){null==b&&(b=0);this.node.style.webkitTransition="opacity 0.15s ease-in-out";this.node.style.mozTransition="opacity 0.15s ease-in-out";this.node.style.msTransition="opacity 0.15s ease-in-out";this.node.transition="opacity 0.15s ease-in-out";return setTimeout(function(b){return function(){return b._setOpacity(a)}}(this),
1E3*b)};a.prototype._setOpacity=function(a){if(0!==a||!this.visible)return this.node.style.opacity=a};return a}(player.view.View);
player.view.LoadView=function(b){function a(){this._textCss=bind(this._textCss,this);this._css=bind(this._css,this);this.hide=bind(this.hide,this);this.show=bind(this.show,this);this.render=bind(this.render,this);a.__super__.constructor.call(this);this.textNode=document.createElement("div");this.textNode.innerHTML="loading player...";this.node.appendChild(this.textNode);this.node.style.display="none"}extend(a,b);a.prototype.render=function(a){this.data=a;this.data.parent.appendChild(this.node);this.node.style.cssText=
this._css();return this.textNode.style.cssText=this._textCss()};a.prototype.show=function(){this.node.style.visibility="visible";return this.node.style.display="block"};a.prototype.hide=function(){return this.node.style.display="none"};a.prototype._css=function(){return"position: absolute; width: 100%; height: 100%; background-color: black; top: 0;"};a.prototype._textCss=function(){return"font-size: 13px; color: white; margin-top: "+.5*this.data.video.height+"px; text-align: center;"};return a}(player.view.View);
player.view.ViewCollection=function(){var b=player.view.LoadView;var a=player.view.ControlsView;var c=player.view.AdView;var d=player.view.VideoView;return function(){this.videoView=new d;this.adView=new c;this.controlsView=new a;this.loadView=new b}}();
player.controller.VideoController=function(){function b(b,e){this.models=b;this.views=e;this._onFullScreened=bind(this._onFullScreened,this);this._onUnmuted=bind(this._onUnmuted,this);this._onMuted=bind(this._onMuted,this);this._onPaused=bind(this._onPaused,this);this._onPlayed=bind(this._onPlayed,this);this._onVideoSeekEnded=bind(this._onVideoSeekEnded,this);this._onVideoSeekStarted=bind(this._onVideoSeekStarted,this);this._onSoundSeeked=bind(this._onSoundSeeked,this);this._onResize=bind(this._onResize,
this);b=this.models.playerConfigModel.getData();this.models.playerConfigModel.on(a.RESIZE,this._onResize);this.views.controlsView.on(c.SOUND_SEEKED,this._onSoundSeeked);this.views.controlsView.on(c.VIDEO_SEEK_STARTED,this._onVideoSeekStarted);this.views.controlsView.on(c.VIDEO_SEEK_ENDED,this._onVideoSeekEnded);this.views.controlsView.on(c.PLAYED,this._onPlayed);this.views.controlsView.on(c.PAUSED,this._onPaused);this.views.controlsView.on(c.MUTED,this._onMuted);this.views.controlsView.on(c.UNMUTED,
this._onUnmuted);this.views.controlsView.on(c.FULL_SCREENED,this._onFullScreened);this.views.videoView.render(b)}var a=core.event.Event;var c=player.event.ControlsEvent;b.prototype._onResize=function(a){return this.views.videoView.resize(a.data.width,a.data.height)};b.prototype._onSoundSeeked=function(a){return this.views.videoView.setVolume(a.data.volume)};b.prototype._onVideoSeekStarted=function(a){return this.views.videoView.pause()};b.prototype._onVideoSeekEnded=function(a){this.views.videoView.setTime(null,
a.data.percent);return this.views.videoView.play()};b.prototype._onPlayed=function(){return this.views.videoView.play()};b.prototype._onPaused=function(){return this.views.videoView.pause()};b.prototype._onMuted=function(){return this.views.videoView.mute()};b.prototype._onUnmuted=function(){return this.views.videoView.unmute()};b.prototype._onFullScreened=function(){return this.views.videoView.requestFullScreen()};return b}();
player.controller.AdController=function(){function b(b){this.player=b;this._onEnterFullScreen=bind(this._onEnterFullScreen,this);this._onAdReported=bind(this._onAdReported,this);this._onAdStopped=bind(this._onAdStopped,this);this._onAdStarted=bind(this._onAdStarted,this);this._onAdManagerReady=bind(this._onAdManagerReady,this);this._createManager=bind(this._createManager,this);this._initViews=bind(this._initViews,this);this._onResize=bind(this._onResize,this);if(!window.SizmekAdManager)return null;
this.models=this.player.models;this.views=this.player.views;this._initViews();this._createManager();this.views.videoView.on(c.ENTER_FULL_SCREEN,this._onEnterFullScreen);this.models.playerConfigModel.on(a.RESIZE,this._onResize)}var a=core.event.Event;var c=player.event.VideoEvent;b.prototype.ad=null;b.prototype._onResize=function(a){var b=a.data.width;a=a.data.height;this.adManager.resize(b,a);return this.views.adView.resize(b,a)};b.prototype._initViews=function(){this.views.controlsView.hide();this.views.videoView.hide();
this.views.adView.hide();return this.views.loadView.show()};b.prototype._createManager=function(){var a=this.models.adConfigModel.getData();this.adManager=new SizmekAdManager({videoTag:this.views.videoView.video,adContainer:this.views.adView.node,ads:a,data:{noSize:this.player.config.noSize}});this.adManager.on("pluginReady",this._onAdManagerReady);this.adManager.on("adStarted",this._onAdStarted);this.adManager.on("adStopped",this._onAdStopped);return this.adManager.on("adReported",this._onAdReported)};
b.prototype._onAdManagerReady=function(){var a=this.models.playerConfigModel.getData();this.views.adView.render(a);this.views.controlsView.show();this.views.videoView.show();return this.views.loadView.hide()};b.prototype._onAdStarted=function(a){this.ad=a.data.ad;this.views.adView.show();"Linear"===this.ad.format&&(this.views.controlsView.disable(),this.views.videoView.disableControls());return this.player.emit("adStarted",a.data)};b.prototype._onAdStopped=function(a){this.ad=!1;this.views.adView.hide();
this.views.controlsView.enable();this.views.controlsView.hide();this.views.videoView.enableControls();return this.player.emit("adStopped",a.data)};b.prototype._onAdReported=function(a){return this.player.emit("adReported",a.data)};b.prototype._onEnterFullScreen=function(){if(this.ad)return this.views.videoView.disableControls()};return b}();
player.controller.ControlsController=function(){function b(b,e){this.models=b;this.views=e;this._onMouseOver=bind(this._onMouseOver,this);this._onBufferChanged=bind(this._onBufferChanged,this);this._onTimeChanged=bind(this._onTimeChanged,this);this._onPaused=bind(this._onPaused,this);this._onPlayed=bind(this._onPlayed,this);this._onVolumeChanged=bind(this._onVolumeChanged,this);if(c.isMobile())return this;b=this.models.playerConfigModel.getData();this.views.videoView.on(a.VOLUME_CHANGED,this._onVolumeChanged);
this.views.videoView.on(a.PLAYED,this._onPlayed);this.views.videoView.on(a.PAUSED,this._onPaused);this.views.videoView.on(a.TIME_CHANGED,this._onTimeChanged);this.views.videoView.on(a.BUFFER_CHANGED,this._onBufferChanged);this.views.videoView.on(a.MOUSE_OVER,this._onMouseOver);this.views.controlsView.render(b)}var a=player.event.VideoEvent;var c=core.common.Utils;b.prototype._onVolumeChanged=function(a){return this.views.controlsView.setVolume(a.data.volume)};b.prototype._onPlayed=function(a){return this.views.controlsView.play()};
b.prototype._onPaused=function(a){return this.views.controlsView.pause()};b.prototype._onTimeChanged=function(a){return this.views.controlsView.setTime(a.data.time,a.data.duration)};b.prototype._onBufferChanged=function(a){return this.views.controlsView.setBuffer(a.data.percent)};b.prototype._onMouseOver=function(a){return this.views.controlsView.show()};return b}();
player.controller.LoadController=function(){return function(b,a){this.models=b;this.views=a;b=this.models.playerConfigModel.getData();this.views.loadView.render(b)}}();
player.controller.ControllerCollection=function(){var b=player.controller.LoadController;var a=player.controller.ControlsController;var c=player.controller.AdController;var d=player.controller.VideoController;return function(e){this.player=e;this.videoController=new d(this.player.models,this.player.views);this.controlsController=new a(this.player.models,this.player.views);this.adController=new c(this.player);this.loadController=new b(this.player.models,this.player.views)}}();
player.Html5Player=function(b){function a(b){this.config=null!=b?b:{};this._onDomLoaded=bind(this._onDomLoaded,this);this.resize=bind(this.resize,this);a.__super__.constructor.call(this);if(c.domLoaded())this._onDomLoaded();else c.on(window,"load",this._onDomLoaded)}extend(a,b);var c=core.common.Utils;var d=player.controller.ControllerCollection;var e=player.view.ViewCollection;var f=player.model.ModelCollection;a.prototype.resize=function(a,b){if(this.models)return this.models.playerConfigModel.resize(a,
b)};a.prototype._onDomLoaded=function(){this.models=new f(this.config);this.views=new e;return this.controllers=new d(this)};return a}(core.event.EventDispatcher);window.SizmekHtml5Player=player.Html5Player;
